# WebSocket

**WebSocket 中传输的消息皆为 `JsonObject` 对象封装的消息**

## 消息结构

### 示例
```JSON5
{
  "type": "x.x:x",
  "data": {
    // 动态内容, 根据不同 TYPE 提供不同内容
  }
}
```

### Type

Type 由种类ID与操作名组合而来，形如 `种类ID:操作名`

#### 种类ID及其可用的操作名
> 当使用其中的操作时需要目标服务器已经安装或注入 iLoveMu 前置插件 
> {style='warning'}

**console.in**

当 MuView 从服务器页中的控制台发送消息时的消息类别

| 操作名  | 用途                    |
|------|-----------------------|
| cmd  | 向服务器中传入一个指令（以控制台身份）   |
| cmdp | 向服务器中传入一个指令（以指定玩家的身份) |

**console.out**

当 MuCore 从服务器中收到消息发送至 MuView 时的消息类别

| 操作名         | 用途                |
|-------------|-------------------|
| before_work | 服务器在执行启动前任务时输出的日志 |
| info        | 服务器运行时日志          |
| warn        | 服务器运行时产生的警告       |
| err         | 服务器运行时产生的错误       |


**msg.in**

从 MuView 处理消息时的消息类别

| 操作名       | 用途               |
|-----------|------------------|
| send      | 向服务器中的指定玩家发送一个消息 |
| broadcast | 向服务器中广播消息        |

**msg.out**

从 MuCore 发送消息时的消息类别

| 操作名  | 用途                         |
|------|----------------------------|
| send | 服务器中执行了向 MuCore 发送消息时产生的操作 |

**config**

处理设置的消息类别

| 操作名 | 用途    |
|-----|-------|
| add | 增加设置项 |
| del | 删减设置项 |
| mod | 更改设置项 |

**server**

处理服务器操作时的消息类别

| 操作名    | 用途         |
|--------|------------|
| start  | 启动服务器      |
| stop   | 关闭服务器      |
| event  | 发生事件时产生的操作 |
